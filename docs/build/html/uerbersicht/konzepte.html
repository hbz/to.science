<!doctype html>
<html class="no-js" lang="en">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Software" href="software.html" /><link rel="prev" title="Übersicht" href="uebersicht.html" />

    <!-- Generated with Sphinx 6.1.3 and Furo 2023.03.23 -->
        <title>Konzepte - to.science documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?digest=fad236701ea90a88636c2a8c73b44ae642ed2a53" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">to.science  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="../_static/hbz-logo.svg" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">to.science  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current has-children"><a class="reference internal" href="uebersicht.html">Übersicht</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Konzepte</a></li>
<li class="toctree-l2"><a class="reference internal" href="software.html">Software</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../core/core.html">The to.science.core Library</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../core/whyCore.html">Why to.science.core?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core/whyCore.html#where-to-find-to-science-core">Where to find to.science.core?</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../api/api.html">API</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../api/toscience.html">to.science.api</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/labels.html">to.science.labels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/forms.html">to.science.forms</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/thumbs.html">to.science.thumbs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/skos.html">skos-lookup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api/complex-example.html">Complex Example of hierarchical content</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../development/development.html">Entwicklung</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../development/JsonLDMapper.html">JSON in Java-Klassen überführen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/oaiMetadataFormats.html">Neues Metadaten-Format in die OAI-Schnittstelle integrieren</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/addMetadataField2Api.html">Anlegen neuer Metadaten-Felder in der API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/addMetadataField2Forms.html">Anlegen neuer Metadaten-Felder in FORMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/bindMetadataField2ScalaTemplate.html">Metadaten-Felder im Formular zugänglich machen</a></li>
<li class="toctree-l2"><a class="reference internal" href="../development/DatenWegDurchFormular.html">Der mutmaßliche Weg der Daten durch to.science.forms</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../colophon.html">Colophon</a></li>
<li class="toctree-l1"><a class="reference internal" href="../colophon.html#license">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../colophon.html#links">Links</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="konzepte">
<h1>Konzepte<a class="headerlink" href="#konzepte" title="Permalink to this heading"></a></h1>
<section id="objektmodell">
<h2>Objektmodell<a class="headerlink" href="#objektmodell" title="Permalink to this heading"></a></h2>
<p>Regal realisiert ein einheitliches Objektmodell in dem sich eine
Vielzahl von Publikationstypen speichern lassen. Die Speicherschicht
wird über <a class="reference external" href="#_fedora_commons_3">Fedora Commons 3</a> realisiert.</p>
<p>Eine einzelne Publikation besteht i.d.R. aus mehreren <a class="reference external" href="#_fedora_commons_3">Fedora Commons
3</a>-Objekten, die in einer hierarchischen
Beziehung zueinander stehen.</p>
<div class="table-wrapper docutils container" id="id15">
<table class="docutils align-default" id="id15">
<caption><span class="caption-text">Fedora Object</span><a class="headerlink" href="#id15" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Datenstrom</p></th>
<th class="head"><p>Pflicht</p></th>
<th class="head"><p>Beschreibung</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DC</p></td>
<td><p>Ja</p></td>
<td><p>Von Fedora
vorgeschrieben. Wird
für die fedorainterne
Suche verwendet</p></td>
</tr>
<tr class="row-odd"><td><p>RELS-EXT</p></td>
<td><p>Ja</p></td>
<td><p>Von Fedora
vorgeschrieben. Wird
für viele Sachen
verwendet - (1)
Hierarchien - (2)
Steuerung der
Sichtbarkeiten - (2)
OAI-Providing</p></td>
</tr>
<tr class="row-even"><td><p>data</p></td>
<td><p>Nein</p></td>
<td><p>Die eigentlichen
Daten der
Publikation. Oft ein
PDF.</p></td>
</tr>
<tr class="row-odd"><td><p>metadata oder
metadata2</p></td>
<td><p>Nein</p></td>
<td><p>Bibliografische
Metadaten. Metadata2
wurde mit dem Umstieg
auf die Lobid-API v2
eingeführt.</p></td>
</tr>
<tr class="row-even"><td><p>objectTimestamp</p></td>
<td><p>Nein</p></td>
<td><p>Eine Datei mit einem
Zeitstempel. Der
Zeitstempel wird bei
bestimmten Aktionen
gesetzt.</p></td>
</tr>
<tr class="row-odd"><td><p>seq</p></td>
<td><p>Nein</p></td>
<td><p>Eine Hilfsdatei mit
einem JSON-Array. Das
Array zeigt an, in
welcher Reihenfolge
Kindobjekte
anzuzeigen sind.
Dieses Hilfskonstrukt
existiert, da in der
RELS-EXT keine
RDF-Listen abgelegt
werden können.</p></td>
</tr>
<tr class="row-even"><td><p>conf</p></td>
<td><p>Nein</p></td>
<td><p>Websites und
Webschnitte speichern
in einem
conf-Datenstrom alle
Parameter mit denen
die zugehörige
Webseite geharvested
wurde.</p></td>
</tr>
</tbody>
</table>
</div>
<p>Die Metadaten werden als ASCII-Kodierte N-Triple abgelegt. Da alle
Fedora-Daten als Dateien im Dateisystem abgelegt werden, ist diese
Veriante besonders robust gegen Speicherfehler. N-Triple ist ein Format,
dass sich Zeilenweise lesen lässt. ASCII ist die einfachste Form der
Textkodierung.</p>
<p>Die Daten werden als “managed”-Datastream in den Objektspeicher der
Fedora abgelegt. Eine Ausnahme bilden Webseiten. Die als WARC
gespeicherten Inhalte werden “unmanaged” lediglich verlinkt. Im Fedora
Objektspeicher wird nur eine Datei mit der ensprechenden Referenz
abgelegt.</p>
</section>
<section id="namespaces-und-identifier">
<span id="id1"></span><h2>Namespaces und Identifier<a class="headerlink" href="#namespaces-und-identifier" title="Permalink to this heading"></a></h2>
<p>Jede Regal-Installation arbeitet auf einem festgelegten Namespace. Wenn
über die <a class="reference external" href="#_regal_api_2">regal-api</a> Objekte angelegt werden, finden
sich diese immer in dem entsprechenden Namespace wieder. Hinter dem
Namespace findet sich, abgetrennt mit einem Dopplepunkt eine
hochlaufende Zahl, die i.d.R. über <a class="reference external" href="#_fedora_commons_3">Fedora Commons
3</a> bezogen wird.</p>
<p>Der so zusammengesetzte Identifier kommt in allen Systemkomponenten zum
Einsatz.</p>
<div class="table-wrapper docutils container" id="id16">
<table class="docutils align-default" id="id16">
<caption><span class="caption-text">Beispiel Regal Identifier</span><a class="headerlink" href="#id16" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>ID</p></th>
<th class="head"><p>Komponente</p></th>
<th class="head"><p>URL</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>regal:1</p></td>
<td><p>drupal</p></td>
<td><p><a class="reference external" href="http://localhost/resource/regal:1">http://localhost/resource/regal:1</a></p></td>
</tr>
<tr class="row-odd"><td><p>regal:1</p></td>
<td><p>regal-api</p></td>
<td><p><a class="reference external" href="http://api.localhost/resource/regal:1">http://api.localhost/resource/regal:1</a></p></td>
</tr>
<tr class="row-even"><td><p>regal:1</p></td>
<td><p>fedora</p></td>
<td><p><a class="reference external" href="http://localhost:8080/fedora/objects/regal:1">http://localhost:8080/fedora/objects/regal:1</a></p></td>
</tr>
<tr class="row-odd"><td><p>regal:1</p></td>
<td><p>elasticsearch</p></td>
<td><p><a class="reference external" href="http://localhost:9200/regal/_all/regal:1">http://localhost:9200/regal/_all/regal:1</a></p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="deskriptive-metadaten">
<span id="id2"></span><h2>Deskriptive Metadaten<a class="headerlink" href="#deskriptive-metadaten" title="Permalink to this heading"></a></h2>
<p>Regal unterstützt eine große Anzahl von Metadatenfeldern zur
Beschreibung von bibliografischen Ressourcen. Jedes in Regal
verspeicherte Objekt kann mit Hilfe von RDF-Metadaten beschrieben
werden. Das System verspeichert grundsätzlich alle Metadaten, solange
Sie im richtigen Format an die Schnittstelle gespielt werden.</p>
<p>Darüber hinaus können über bestimmte Angaben, bestimmte weitergehende
Funktionen angesteuert werden. Dies betrifft u.a.:</p>
<ul class="simple">
<li><p>Anzeige und Darstellung</p></li>
<li><p>Metadatenkonvertierungen</p></li>
<li><p>OAI-Providing</p></li>
<li><p>Suche</p></li>
</ul>
<p>Alle bekannten Metadateneinträge werden in der Komponente
<a class="reference external" href="#_etikett">Etikett</a> verwaltet. In <a class="reference external" href="#_etikett">Etikett</a> kann
konfiguriert werden, welche URIs aus den RDF-Daten in das JSON-LD-Format
von <a class="reference external" href="#_regal_api_2">regal-api</a> überführt werden. Außerdem kann die
Reihenfolge der Darstellung, und das Label zur Anzeige gesetzt werden.</p>
<div class="table-wrapper docutils container" id="id17">
<table class="docutils align-default" id="id17">
<caption><span class="caption-text">Etikett-Eintrag für dc:title</span><a class="headerlink" href="#id17" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Label</p></th>
<th class="head"><p>Pictogram</p></th>
<th class="head"><p>Name (json)</p></th>
<th class="head"><p>URI</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Container</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Titel</p></td>
<td><p>keine
Angabe</p></td>
<td><p>title</p></td>
<td><p><a class="reference external" href="http://purl.org/dc/terms/title">http://purl.org/dc/terms/title</a></p></td>
<td><p>String</p></td>
<td><p>keine
Angabe</p></td>
<td><p>keine
Angabe</p></td>
</tr>
</tbody>
</table>
</div>
<p><strong>Etikett-Eintrag als Json.</strong></p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;title&quot;</span><span class="p">:{</span> <span class="s2">&quot;@id&quot;</span><span class="o">=</span><span class="s2">&quot;http://purl.org/dc/terms/title&quot;</span><span class="p">,</span> <span class="s2">&quot;label&quot;</span><span class="o">=</span><span class="s2">&quot;Titel&quot;</span> <span class="p">}</span>
</pre></div>
</div>
<p>Die etikett Datenbank wird beim Neustart jeder
<a class="reference external" href="#_regal_api_2">regal-api</a>-Instanz eingelesen. Außerdem wird die
HTTP-Schnittstelle von Etikett immer wieder angesprochen um zur Anzeige
geeignete Labels in das System zu holen und anstatt der rohen URIs
einzublenden. Das <a class="reference external" href="#_regal_api_2">regal-api</a>-Modul läuft dabei auch
ohne den Etikett-Services, allerdings nur mit eingeschränkter
Funktionalität; beispielsweise fallen Anzeigen von verlinkten Ressourcen
(und das ist in Regal fast alles) weniger schön aus.</p>
<section id="wie-kommen-bibliografische-metadaten-ins-system">
<span id="id3"></span><h3>Wie kommen bibliografische Metadaten ins System?<a class="headerlink" href="#wie-kommen-bibliografische-metadaten-ins-system" title="Permalink to this heading"></a></h3>
<p>In Regal können bibliografische Metadaten aus dem hbz-Verbundkatalog an
Ressourcen “angelinkt” werden. Dies erfolgt über Angabe der ID des
entsprechenden Titelsatzes (z.b. HT017766754). Mit Hilfe dieser ID kann
Regal einen Titelimport durchführen. Dabei wird auf die Schnittstellen
der <a class="reference external" href="https://lobid.org">Lobid-API</a> zugegriffen.</p>
<p>Regal bietet außerdem die Möglichkeit, Metadaten über Erfassungsmasken
zu erzeugen und zu speichern. Dies erfolgt mit Hilfe des Moduls
<a class="reference external" href="#_zettel">Zettel</a>. <a class="reference external" href="#_zettel">Zettel</a> ist ein Webservice, der
verschiedene HTML-Formulare bereitstellt. Die Formulare können
RDF-Metadaten einlesen und ausgeben. Zettel-Formulare werden über
Javascript mit Hilfe eines IFrame in die eigentliche Anwendung
angebunden. Über Zettel werden Konzepte aus dem Bereich Linked Data
umgesetzt. So können Feldinhalte über entsprechende Eingabeelemente in
Drittsystemen recherchiert und verlinkt werden. Die Darstellung von
Links erfolgt in Zettel mit Hilfe von <a class="reference external" href="#_etikett">Etikett</a>.
Umfangreichere Notationssysteme wie Agrovoc oder DDC werden über einen
eigenen Index aus dem Modul <a class="reference external" href="#_skos_lookup">skos-lookup</a> eingebunden.
Zettel unterstützt zur Zeit folgende Linked-Data-Quellen:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://lobid.org/gnd">Lobid (GND)</a></p></li>
<li><p><a class="reference external" href="https://lobid.org/resources">Lobid (Ressource)</a></p></li>
<li><p><a class="reference external" href="http://aims.fao.org/vest-registry/vocabularies/agrovoc">Agrovoc</a></p></li>
<li><p><a class="reference external" href="https://www.oclc.org/en/dewey.html">DDC</a></p></li>
<li><p><a class="reference external" href="https://www.crossref.org/services/funder-registry/">CrossRef (Funder Registry)</a></p></li>
<li><p><a class="reference external" href="https://orcid.org/">Orcid</a></p></li>
<li><p><a class="reference external" href="https://www.geonames.org/">Geonames</a></p></li>
<li><p><a class="reference external" href="https://www.openstreetmap.org">Open Street Maps Koordinaten</a></p></li>
</ul>
</section>
</section>
<section id="anzeige-und-darstellung">
<span id="id4"></span><h2>Anzeige und Darstellung<a class="headerlink" href="#anzeige-und-darstellung" title="Permalink to this heading"></a></h2>
<p>Über die Schnittstellen der <a class="reference external" href="#_regal_api_2">regal-api</a> können
unterschiedliche Darstellungen einer Publikation bezogen werden. Über
<a class="reference external" href="https://de.wikipedia.org/wiki/Content_Negotiation">Content
Negotiation</a>
können Darstellungen per HTTP-Header angefragt werden. Um
unterschiedliche Darstellungen im Browser anzeigen zu lassen, kann
außerden, über das Setzen von entsprechenden Endungen, auf
unterschiedliche Representationen eine Resource zugegriffen werden.</p>
<p><strong>Auswahl von Pfaden zu unterschiedlichen Representationen einer
Ressource.</strong></p>
<p>/resource/regal:1 /resource/regal:1.json /resource/regal:1.rdf
/resource/regal:1.epicur /resource/regal:1.mets</p>
<p>In der HTML-Darstellung greift <a class="reference external" href="#_regal_api_2">regal-api</a> auf den
Hilfsdienst <a class="reference external" href="#_thumby">Thumby</a> zu um darüber Thumbnail-Darstellungen
von PDFs oder Bilder zu kreieren. Bei großen Bildern wird außerdem der
<a class="reference external" href="#_deepzoomer">Deepzoomer</a> angelinkt, der eine Darstellung von
hochauflösenden Bildern über das Tool
<a class="reference external" href="https://openseadragon.github.io/">OpenSeadragon</a> erlaubt. Video- und
Audio-Dateien werden über die entsprechenden HTML5 Elemente gerendert.</p>
</section>
<section id="der-hbz-verbundkatalog">
<span id="id5"></span><h2>Der hbz-Verbundkatalog<a class="headerlink" href="#der-hbz-verbundkatalog" title="Permalink to this heading"></a></h2>
<p>Metadaten, die über den Verbundkatalog importiert wurden, können über
einen Cronjob regelmäßig aktualisiert werden. Außerdem können diese
Daten über OAI-PMH an den Verbundkatalog zurückgeliefert werden, so dass
dieser, Links auf die Volltexte erhält.</p>
</section>
<section id="metadatenkonvertierung">
<span id="id6"></span><h2>Metadatenkonvertierung<a class="headerlink" href="#metadatenkonvertierung" title="Permalink to this heading"></a></h2>
<p>Für die Metadatenkonvertierung gibt es kein festes Vorgehensmodell oder
Werkzeug. I.d.R. gibt es für jede Representation eine oder eine Reihe
von Javaklassen, die für eine On-the-fly-Konvertierung sorgen. Die
HTML-Darstellung basiert grundlegend auf denselben Daten, die auch im
<a class="reference external" href="https://www.elastic.co/guide/index.html">Elasticsearch</a>-Index liegen
und ist im wesentlichen eine JSON-LD-Darstellung, die mit Hilfe der in
<a class="reference external" href="#_etikett">Etikett</a> hinterlegten Konfiguration aus den
bibliografischen Metadaten gewonnen wurde.</p>
</section>
<section id="oai-providing">
<span id="id7"></span><h2>OAI-Providing<a class="headerlink" href="#oai-providing" title="Permalink to this heading"></a></h2>
<p>Öffentlich zugängliche Publikationen sind auch über die
OAI-Schnittstelle verfügbar. Dabei wird jede Publikation einer Reihe von
OAI-Sets zugeordnet und in unterschiedlichen Formaten angeboten.</p>
<div class="table-wrapper docutils container" id="id18">
<table class="docutils align-default" id="id18">
<caption><span class="caption-text">OAI Set</span><a class="headerlink" href="#id18" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Set</p></th>
<th class="head"><p>Kriterium</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ddc:*</p></td>
<td><p>Wenn ein dc:subject mit dem
String “http://dewey.info/class/”
beginnt, wird ein Set mit der
entsprechenden DDC-Nummer
gebildet und die Publikation wird
zugeordnet</p></td>
</tr>
<tr class="row-odd"><td><p>contentType</p></td>
<td><p>Der “contentType” weist darauf
hin, in welcher Weise die
Publikation in Regal. Abgelegt
ist.</p></td>
</tr>
<tr class="row-even"><td><p>open_access</p></td>
<td><p>All Publikationen, die als
Sichtbarkeit “public” haben</p></td>
</tr>
<tr class="row-odd"><td><p>urn-set-1</p></td>
<td><p>Publikationen mit einer URN, die
mit <a class="reference external" href="urn:nbn:de:hbz:929:01">urn:nbn:de:hbz:929:01</a> beginnt</p></td>
</tr>
<tr class="row-even"><td><p>urn-set-2</p></td>
<td><p>Publikationen mit einer URN, die
mit <a class="reference external" href="urn:nbn:de:hbz:929:02">urn:nbn:de:hbz:929:02</a> beginnt</p></td>
</tr>
<tr class="row-odd"><td><p>epicur</p></td>
<td><p>Publikationen, die in einem
URN-Set sind</p></td>
</tr>
<tr class="row-even"><td><p>aleph</p></td>
<td><p>Publikationen , die mit einer
Aleph-Id verknüpft sind</p></td>
</tr>
<tr class="row-odd"><td><p>edoweb01</p></td>
<td><p>spezielles, pro
<a class="reference external" href="#_regal_api_2">reg
al-api</a>-Instanz
konfigurierbares Set für alle
Publikationen, die im aleph-Set
sind</p></td>
</tr>
<tr class="row-even"><td><p>ellinet01</p></td>
<td><p>spezielles, pro
<a class="reference external" href="#_regal_api_2">reg
al-api</a>-Instanz
konfigurierbares Set für alle
Publikationen, die im aleph-Set
sind</p></td>
</tr>
</tbody>
</table>
</div>
<div class="table-wrapper docutils container" id="id19">
<table class="docutils align-default" id="id19">
<caption><span class="caption-text">OAI Metadatenformat</span><a class="headerlink" href="#id19" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Format</p></th>
<th class="head"><p>Kriterium</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>oai_dc</p></td>
<td><p>Alle öffentlich sichtbaren
Objekte, die als bestimmte
ContentTypes angelegt wurden.</p></td>
</tr>
<tr class="row-odd"><td><p>epicur</p></td>
<td><p>Alle Objekte, die eine URN haben</p></td>
</tr>
<tr class="row-even"><td><p>aleph</p></td>
<td><p>Alle Objekte, die einen
persistenten Identifier haben</p></td>
</tr>
<tr class="row-odd"><td><p>mets</p></td>
<td><p>Wie oai_dc</p></td>
</tr>
<tr class="row-even"><td><p>rdf</p></td>
<td><p>Wie oai_dc</p></td>
</tr>
<tr class="row-odd"><td><p>wgl</p></td>
<td><p>Format für LeibnizOpen. Alle
Objekte die über das Feld
“collectionOne” einer Institution
zugeordnet wurden und über den
ContentType “article”
eingeliefert wurden.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="suche">
<span id="id8"></span><h2>Suche<a class="headerlink" href="#suche" title="Permalink to this heading"></a></h2>
<p>Der Elasticsearch-Index wird mit Hilfe einer JSON-LD Konvertierung
befüllt. Die Konvertierung basiert im wesentlichen auf den
bibliografischen Metadaten der einzelnen Ressourcen und wir mit Hilfe
der in <a class="reference external" href="#_etikett">Etikett</a> hinterlegten Konfiguration erzeugt.</p>
</section>
<section id="zugriffsberechtigungen-und-sichtbarkeiten">
<span id="id9"></span><h2>Zugriffsberechtigungen und Sichtbarkeiten<a class="headerlink" href="#zugriffsberechtigungen-und-sichtbarkeiten" title="Permalink to this heading"></a></h2>
<p>Regal setzt ein rollenbasiertes Konzept zur Steuerung von
Zugriffsberechtigungen um. Eine besondere Bedeutung kommt dem lesenden
Zugriff auf Ressourcen zu. Einzelne Ressourcen können in ihrer
Sichtbarkeit so eingeschränkt werden, dass nur mit den Rechten einer
bestimmten Rolle lesend zugegriffen werden kann. Dabei kann der Zugriff
auf Metadaten und Daten separat gesteuert werden.</p>
<figure class="align-default" id="id20">
<img alt="Screenshot zur Verdeutlichung von Sichtbarkeiten in Regal" src="../_images/accessControl.png" />
<figcaption>
<p><span class="caption-text">Screenshot zur Verdeutlichung von Sichtbarkeiten in Regal</span><a class="headerlink" href="#id20" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>Die Konfiguration hat Auswirkungen auf die Sichtbarkeit einer
Publikation in den unterschiedlichen Systemteilen. Die folgende Tabelle
veranschaulicht den derzeitigen Stand der Implementierung.</p>
<section id="sichtbarkeiten-operationen-rollen">
<span id="id10"></span><h3>Sichtbarkeiten, Operationen, Rollen<a class="headerlink" href="#sichtbarkeiten-operationen-rollen" title="Permalink to this heading"></a></h3>
<div class="table-wrapper docutils container" id="id21">
<table class="docutils align-default" id="id21">
<caption><span class="caption-text"><strong>Schreibender</strong> Zugriff auf Daten und Metadaten</span><a class="headerlink" href="#id21" title="Permalink to this table"></a></caption>
<tbody>
<tr class="row-odd"><td><p>Rolle</p></td>
<td><p>Art der Aktion</p></td>
</tr>
<tr class="row-even"><td><p>ADMIN</p></td>
<td><p>Darf alle Aktionen durchführen.
Auch Bulk-Aktionen und “Purges”</p></td>
</tr>
<tr class="row-odd"><td><p>EDITOR</p></td>
<td><p>Darf Objekte anlegen, löschen,
Sichtbarkeiten ändern, etc.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="table-wrapper docutils container" id="id22">
<table class="docutils align-default" id="id22">
<caption><span class="caption-text"><strong>Lesender</strong> Zugriff auf Metadaten</span><a class="headerlink" href="#id22" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Sichtbarkeit</p></th>
<th class="head"><p>Rolle</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>public</p></td>
<td><p>GUEST,READ
ER,SUBSCRIBER,REMOTE,ADMIN,EDITOR</p></td>
</tr>
<tr class="row-odd"><td><p>private</p></td>
<td><p>ADMIN,EDITOR</p></td>
</tr>
</tbody>
</table>
</div>
<div class="table-wrapper docutils container" id="id23">
<table class="docutils align-default" id="id23">
<caption><span class="caption-text"><strong>Lesender</strong> Zugriff auf Daten</span><a class="headerlink" href="#id23" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Sichtbarkeit</p></th>
<th class="head"><p>Rolle</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>public</p></td>
<td><p>GUEST,READ
ER,SUBSCRIBER,REMOTE,ADMIN,EDITOR</p></td>
</tr>
<tr class="row-odd"><td><p>restricted</p></td>
<td><p>READ
ER,SUBSCRIBER,REMOTE,ADMIN,EDITOR</p></td>
</tr>
<tr class="row-even"><td><p>remote</p></td>
<td><p>READ
ER,SUBSCRIBER,REMOTE,ADMIN,EDITOR</p></td>
</tr>
<tr class="row-odd"><td><p>single</p></td>
<td><p>SUBSCRIBER,ADMIN,EDITOR</p></td>
</tr>
<tr class="row-even"><td><p>private</p></td>
<td><p>ADMIN,EDITOR</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="benutzerverwaltung">
<span id="id11"></span><h2>Benutzerverwaltung<a class="headerlink" href="#benutzerverwaltung" title="Permalink to this heading"></a></h2>
<p>Die Benutzerverwaltung von Regal findet innerhalb von Drupal statt. Zwar
können auch in der <a class="reference external" href="#_regal_api_2">regal-api</a> Benutzer angelegt
werden, jedoch ist die Implementierung in diesem Bereich erst
rudimentär.</p>
<section id="drupal">
<span id="id12"></span><h3>Drupal<a class="headerlink" href="#drupal" title="Permalink to this heading"></a></h3>
<p>Benutzer in Drupal können über das Modul
<a class="reference external" href="#_regal_drupal">regal-drupal</a> unterschiedlichen Rollen zugewiesen
werden. Die Authorisierung erfolgt passwortbasiert. Alle Drupal-Benutzer
greifen über einen vorkonfigurierten Accessor auf die
<a class="reference external" href="#_regal_api_2">regal-api</a> zu. Alle Zugriffe erfolgen verschlüsselt
unter Angabe eines Passwortes. Die Rolle mit deren Berechtigungen
zugegriffen wird, wird dabei in <a class="reference external" href="#_regal_drupal">regal-drupal</a>
gesetzt. Die Drupal-BenutzerId wird als Metadatum in Form eines
proprietären HTTP-Headers mit an <a class="reference external" href="#_regal_api_2">regal-api</a>
geliefert.</p>
</section>
<section id="regal-api">
<span id="id13"></span><h3>Regal-Api<a class="headerlink" href="#regal-api" title="Permalink to this heading"></a></h3>
<p>Auch in regal-api können Api-Benutzer angelegt werden. Zur
Benutzerverwaltung wird eine MySQL-Datenbank eingesetzt, in der die
Passworte der Nutzer abgelegt sind.</p>
</section>
</section>
<section id="ansichten">
<span id="id14"></span><h2>Ansichten<a class="headerlink" href="#ansichten" title="Permalink to this heading"></a></h2>
<p>Um Daten, die in <a class="reference external" href="#_regal_api_2">regal-api</a> abgelegt wurden zur
Anzeige zu bringen sind i.d.R. mehrere Schritte nötig. Die genaue
Vorgehensweise ist davon abhängig, wo die Daten abgelegt werden (in
welchem Fedora Datenstrom). Grundsätzlich basiert die HTML-Darstellung
auf den Daten, die unter dem Format <code class="docutils literal notranslate"><span class="pre">.json2</span></code> einer Ressource abrufbar
sind und einen Eintrag in context.json haben.</p>
<p><strong>Daten zur Ansicht bringen</strong></p>
<ol class="arabic simple">
<li><p>Eintrag des zugehörigen RDF-Properties in die entsprechende
<a class="reference external" href="#_etikett">Etikett</a>-Instanz, bzw. in die <code class="docutils literal notranslate"><span class="pre">/conf/labels.json</span></code>.
Der Eintrag muss einen Namen, ein Label und einen Datentyp haben.
<a class="reference external" href="#_regal_api_2">regal-api</a> neu starten, bzw mit
<code class="docutils literal notranslate"><span class="pre">POST</span> <span class="pre">/context.json</span></code> das neu Laden der Contexteinträge erzwingen.</p></li>
<li><p>Dies müsste reichen, um eine Standardanzeige in der HTML-Ausgabe zu
erreichen</p></li>
<li><p>Wenn die Daten nicht erscheinen, sollte man überprüfen, ob sie unter
dem Format <code class="docutils literal notranslate"><span class="pre">.json2</span></code> erscheinen. Wenn nicht, stellt sich die Frage,
wo die Daten abgelegt werden. Komplett werden nur die Daten aus dem
Fedora Datenstrom /metadata2 prozessiert. Befindet sich das Datum in
z.B. im /RELS-EXT Datenstrom so muss es zunächst manuell unter
<code class="docutils literal notranslate"><span class="pre">helper.JsonMapper#getLd2()</span></code> in das JSON-Objekt eingefügt werden.</p></li>
<li><p>Einige Felder werden auch ausgeblendet. Dies geschieht in
<a class="reference external" href="#_regal_api_2">regal-api</a> unter <code class="docutils literal notranslate"><span class="pre">/public/stylesheets/main.css</span></code>
und in Drupal innerhalb der entsprechenden themes.</p></li>
<li><p>Um spezielle Anzeigen zu realisieren muss schließlich im
HTML-Template angefasst werden, unter
<code class="docutils literal notranslate"><span class="pre">/app/views/tags/resourceView.scala.html</span></code> .</p></li>
</ol>
<p>Insgesamt läuft es also so: Alles was in <a class="reference external" href="#_etikett">Etikett</a>
konfiguriert ist, wird auch ins JSON und damit ins HTML und in den
Suchindex übernommen. Dinge, die im HTML nicht benötigt werden, werden
über CSS wieder ausgeblendet.</p>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="software.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Software</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="uebersicht.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Übersicht</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2021, Hochschulbibliothekszentrum des Landes Nordrhein-Westfalen (hbz)
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Konzepte</a><ul>
<li><a class="reference internal" href="#objektmodell">Objektmodell</a></li>
<li><a class="reference internal" href="#namespaces-und-identifier">Namespaces und Identifier</a></li>
<li><a class="reference internal" href="#deskriptive-metadaten">Deskriptive Metadaten</a><ul>
<li><a class="reference internal" href="#wie-kommen-bibliografische-metadaten-ins-system">Wie kommen bibliografische Metadaten ins System?</a></li>
</ul>
</li>
<li><a class="reference internal" href="#anzeige-und-darstellung">Anzeige und Darstellung</a></li>
<li><a class="reference internal" href="#der-hbz-verbundkatalog">Der hbz-Verbundkatalog</a></li>
<li><a class="reference internal" href="#metadatenkonvertierung">Metadatenkonvertierung</a></li>
<li><a class="reference internal" href="#oai-providing">OAI-Providing</a></li>
<li><a class="reference internal" href="#suche">Suche</a></li>
<li><a class="reference internal" href="#zugriffsberechtigungen-und-sichtbarkeiten">Zugriffsberechtigungen und Sichtbarkeiten</a><ul>
<li><a class="reference internal" href="#sichtbarkeiten-operationen-rollen">Sichtbarkeiten, Operationen, Rollen</a></li>
</ul>
</li>
<li><a class="reference internal" href="#benutzerverwaltung">Benutzerverwaltung</a><ul>
<li><a class="reference internal" href="#drupal">Drupal</a></li>
<li><a class="reference internal" href="#regal-api">Regal-Api</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ansichten">Ansichten</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/jquery.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/scripts/furo.js"></script>
    </body>
</html>